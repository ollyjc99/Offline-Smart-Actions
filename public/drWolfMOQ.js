function runAction(o){const{data:{record:{Type:l},related:{Product2:y,OrderItem:d,Account:[i]},record:m},data:r}=o;let _=new Set,c=new Map,u=new Array,a=new Array;l=="Product Order"&&(i.RecordTypeId==="TBD"||i.RecordTypeId==="TBD"||i.RecordTypeId==="TBD"||i.RecordTypeId==="0122z000002QGJtAAO"||i.RecordTypeId==="0122z000002QGJyAAO")&&(d.forEach(e=>{_.add(e.Product2Id)}),y.forEach(e=>{_.has(e.Id)&&c.set(e.Id,e)}),c.size&&d.forEach(s),u.length||a.length?(r.error="",D(u,a),r.blockExecution=!0):(r.message="Order validated \xE2\u0153\u201C",r.updateDeviceData=!0,r.reprice=!0,r.blockExecution=!1));function s(e){if(!new Set(["Tax","Promotion","Discount"]).has(e.aforza__Type__c)){let t=c.get(e.Product2Id),n={Id:t.Id,Name:t.Name,Difference:null};(t.DRWO_Minimum_Quantity__c!=null||t.DRWO_Minimum_Quantity__c!=0)&&t.DRWO_Minimum_Quantity__c>e.Quantity&&(n.Difference=e.Quantity-t.DRWO_Minimum_Quantity__c,u.push(n)),(t.DRWO_Maximum_Quantity__c!=null||t.DRWO_Maximum_Quantity__c!=0)&&t.DRWO_Maximum_Quantity__c<e.Quantity&&(n.Difference=`+${e.Quantity-t.DRWO_Maximum_Quantity__c}`,a.push(n))}}function f(e){r.error+=`
\xE2\u0153\u2014 ${e.Name} ${e.Difference}`}function D(e,t){if(e.length&&(r.error+="Die folgenden Produkte liegen unter der Mindestmenge:",e.forEach(f)),t.length){let n="";r.error.length>0&&(n=`

`),r.error+=`${n}Die folgenden Produkte \xC3\xBCberschreiten die H\xC3\xB6chstmenge:`,t.forEach(f)}}return o}
