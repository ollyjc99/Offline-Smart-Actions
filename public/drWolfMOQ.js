function runAction(o){const{data:{record:{Type:l},related:{Product2:s,OrderItem:d,Account:[i]},record:D},data:r}=o;let _=new Set,u=new Map,c=new Array,a=new Array;l=="Product Order"&&(i.RecordTypeId==="TBD"||i.RecordTypeId==="TBD"||i.RecordTypeId==="0123L000000RQhRQAW"||i.RecordTypeId==="0123L000000RQhQQAW")&&(d.forEach(e=>{_.add(e.Product2Id)}),s.forEach(e=>{_.has(e.Id)&&u.set(e.Id,e)}),u.size&&d.forEach(m),c.length||a.length?(r.error="",y(c,a),r.blockExecution=!0):(r.message="Order validated {u2713}",r.updateDeviceData=!0,r.reprice=!0,r.blockExecution=!1));function m(e){if(!new Set(["Tax","Promotion","Discount"]).has(e.aforza__Type__c)){let t=u.get(e.Product2Id),n={Id:t.Id,Name:t.Name,Difference:null};t.DRWO_Minimum_Quantity__c!=null&&t.DRWO_Minimum_Quantity__c!=0&&t.DRWO_Minimum_Quantity__c>e.Quantity&&(n.Difference=e.Quantity-t.DRWO_Minimum_Quantity__c,c.push(n)),t.DRWO_Maximum_Quantity__c!=null&&t.DRWO_Maximum_Quantity__c!=0&&t.DRWO_Maximum_Quantity__c<e.Quantity&&(n.Difference=`+${e.Quantity-t.DRWO_Maximum_Quantity__c}`,a.push(n))}}function f(e){r.error+=`\u2717 ${e.Name} ${e.Difference}`}function y(e,t){if(e.length&&(r.error+="Die folgenden Produkte liegen unter der Mindestmenge:",e.forEach(f)),t.length){let n="";r.error.length>0&&(n=`

`),r.error+=`${n}Die folgenden Produkte \xFCberschreiten die H\xF6chstmenge:`,t.forEach(f)}}return o}
