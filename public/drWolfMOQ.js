function runAction(o){const{data:{record:{Type:l},related:{Product2:y,OrderItem:d,Account:[u]},record:D},data:r}=o;let _=new Set,i=new Map,c=new Array,a=new Array;l!="Return Order"&&(u.RecordTypeId==="TBD"||u.RecordTypeId==="TBD"||u.RecordTypeId==="TBD"||u.RecordTypeId==="0122z000002QGJtAAO"||u.RecordTypeId==="0122z000002QGJyAAO")&&(d.forEach(e=>{_.add(e.Product2Id)}),y.forEach(e=>{_.has(e.Id)&&i.set(e.Id,e)}),i.size&&d.forEach(m),c.length||a.length?(r.error="",s(c,a),r.blockExecution=!0):(r.message="Order validated \u2713",r.updateDeviceData=!0,r.reprice=!0,r.blockExecution=!1));function m(e){if(!new Set(["Tax","Promotion","Discount"]).has(e.aforza__Type__c)){let t=i.get(e.Product2Id),n={Id:t.Id,Name:t.Name,Difference:null};(t.DRWO_Minimum_Quantity__c!=null||t.DRWO_Minimum_Quantity__c!=0)&&t.DRWO_Minimum_Quantity__c>e.Quantity&&(n.Difference=e.Quantity-t.DRWO_Minimum_Quantity__c,c.push(n)),(t.DRWO_Maximum_Quantity__c!=null||t.DRWO_Maximum_Quantity__c!=0)&&t.DRWO_Maximum_Quantity__c<e.Quantity&&(n.Difference=`+${e.Quantity-t.DRWO_Maximum_Quantity__c}`,a.push(n))}}function f(e){r.error+=`
\u2717 ${e.Name} ${e.Difference}`}function s(e,t){if(e.length&&(r.error+="Products under Minimum Order Quantity:",e.forEach(f)),t.length){let n="";r.error.length>0&&(n=`

`),r.error+=`${n}Products over Maximum Order Quantity:`,t.forEach(f)}}return o}
