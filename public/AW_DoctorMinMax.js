function runAction(e){const{data:{record:u,related:{Account:[r],Product2:A,OrderItem:o,aforza__Outlet_Asset__c:I}},data:c}=e;if(u.Type!=="Muster"&&r.RecordTypeId!=="0123L000000RQhQQAW"&&!new Set(["DE","AT","CH"]).has(r.AW_Country__c))return e;let _=!1;const d=new Set(o.map(t=>t.Product2Id)),a=new Map;if(A.forEach(t=>{d.has(t.Id)&&t.AW_Is_Restricted_Drug__c===!0&&a.set(t.Id,t)}),!a.size)return e;const s=new Map,i=new Array;I.forEach(t=>{t.aforza__Account__c===u.AccountId&&d.has(t.aforza__Product__c)&&s.set(t.aforza__Product__c,t)}),o.forEach(h),_&&(c.updateDeviceData={OrderItem:!0},c.reprice=!0,e.data.message=`The quantities of some products have been adjusted to comply with yearly limits.

`,i.forEach(l));function h(t){const f=a.get(t.Product2Id),y=s.get(t.Product2Id),n=f["AW_Doctor_"+r.AW_Country__c+"__c"]-y.AW_Yearly_Quantity__c;if(n>=t.Quantity)return;const Q=t.Quantity;t.Quantity=n<=0?0:n,y.AW_Yearly_Quantity__c+=t.Quantity,i.push({Name:f.Name,Difference:t.Quantity-Q}),_=!0}function l(t){c.message+=`{u2713} ${t.Name} ${t.Difference}`}return e}
